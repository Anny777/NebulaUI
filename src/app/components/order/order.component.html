<div class="content">
  <h2 class="header">Стол № {{number}}</h2>
  <div name="order">
    <h3 class="header">Заказ:</h3>
    <table class="striped">
      <tr *ngFor="let dish of inWorkGroupped">
        <td>{{dish.key.Name}}</td>
        <td style="width: 100px;">{{dish.key.Price}} р.</td>
        <td style="width: 100px;">
          <div style="cursor:pointer;" class="icon">
            <mat-icon>remove</mat-icon>
          </div>
          <div class="icon"> {{dish.value.length}} </div>
          <div style="cursor:pointer;" class="icon">
            <mat-icon>add</mat-icon>
          </div>
        </td>
        <td><strong>{{dish.key.Price * dish.value.length}} р.</strong></td>
      </tr>
      <tr>
        <td><strong>ИТОГО:</strong></td>
        <td></td>
        <td></td>
        <td><strong>{{getTotal()}} руб. </strong></td>
      </tr>
      <tr>
        <td colspan="4">Комментарий к заказу: <textarea rows="5" style="width: 100%"></textarea></td>
      </tr>
      <tr>
        <td *ngIf="!isLoading" colspan="3">
          <button mat-raised-button color="warn" (click)="add()">Заказать</button>
          &nbsp;
          <button mat-raised-button color="warn" (click)="clear()">Сбросить</button>
          &nbsp;
          <button mat-raised-button color="warn" (click)="close()">Закрыть</button>
        </td>
        <td *ngIf="isLoading" colspan="3">
          <mat-spinner [diameter]="50"></mat-spinner>
        </td>
      </tr>
    </table>
  </div>

  <div name="inWork" [hidden]="!inWorkDishes || inWorkDishes.length <= 0">
    <h3 class="header">Заказы:</h3>
    <table class="table-borderless">
      <tr *ngFor="let dish of inWorkDishes">
        <td>{{dish.Name}}</td>
        <td>
          <mat-spinner *ngIf="isStateLoading(dish.CookingDishId)"></mat-spinner>
          <button mat-raised-button color="warn" *ngIf="!isStateLoading(dish.CookingDishId)" (click)="setState(dish.CookingDishId, 3)">Готово</button>
          &nbsp;
          <mat-spinner *ngIf="isStateLoading(dish.CookingDishId)"></mat-spinner>
          <button mat-raised-button color="warn" *ngIf="!isStateLoading(dish.CookingDishId)" (click)="setState(dish.CookingDishId, 5)">Запросить отмену</button>
        </td>
      </tr>
    </table>
  </div>

  <div name="cancellation" [hidden]="!cancellationDishes || cancellationDishes.length <= 0">
    <h3 class="header">Запрошена отмена:</h3>
    <table class="table-borderless">
      <tr *ngFor="let dish of cancellationDishes" [ngClass]="{'warning': true}">
        <td>{{dish.Name}}</td>
        <td>
          <mat-spinner *ngIf="isStateLoading(dish.CookingDishId)"></mat-spinner>
          <button mat-raised-button color="warn" *ngIf="!isStateLoading(dish.CookingDishId)" (click)="setState(dish.CookingDishId, 1)">Подтвердить</button>
          &nbsp;
          <mat-spinner *ngIf="isStateLoading(dish.CookingDishId)"></mat-spinner>
          <button mat-raised-button color="warn" *ngIf="!isStateLoading(dish.CookingDishId)" (click)="setState(dish.CookingDishId, 2)">Отменить</button>
        </td>
      </tr>
    </table>
  </div>

  <div name="deleted" [hidden]="!deletedDishes || deletedDishes.length <= 0">
      <h3 class="header">Отменены:</h3>
      <table class="table-borderless">
        <tr *ngFor="let dish of deletedDishes" [ngClass]="{'error': true}">
          <td>{{dish.Name}}</td>
        </tr>
      </table>
    </div>

  <div name="ready" [hidden]="!readyDishes || readyDishes.length <= 0">
    <h3 class="header">Готовые блюда:</h3>
    <table class="table-borderless">
      <tr *ngFor="let dish of readyDishes" [ngClass]="{'success': true}">
        <td>{{dish.Name}}</td>
        <td>
          <mat-spinner *ngIf="isStateLoading(dish.CookingDishId)"></mat-spinner>
          <button mat-raised-button color="warn" *ngIf="!isStateLoading(dish.CookingDishId)" (click)="setState(dish.CookingDishId, 4)">Забрано</button>
        </td>
      </tr>
    </table>
  </div>

</div>
